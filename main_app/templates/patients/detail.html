
{% extends 'base.html' %}

{% block title %}

Information for {{ patient.name }} | Doctor's Portal

{% endblock %}

{% block content %}

<h1>Patient Info</h1>

<div class="row">
  <div class="col s6">
    <div class="card">
      <div class="card-content">
        <span class="card-title">{{ patient.name }}</span>
        {% if patient.age > 0 %}
        <p>Age: {{ patient.age }}</p>
        {% else %}
        <p>Age: Infant</p>
        {% endif %}
        <p>Gender: {{ patient.gender }}</p>
        <p>Chief Complaint: {{ patient.chief_complaint }}</p>
        <p>Current Condition: {{ patient.current_condition }}</p>
        <p>Past Medical History: {{ patient.past_medical_history }}</p>
      </div>
      <div class="card-action">
        <a href="{% url 'patients_update' patient.id %}">Edit</a>
        <a href="{% url 'patients_delete' patient.id %}">Delete</a>
      </div>
    </div>
  </div>
  <hr />
  <div class="row">
    <div class="col s6">
      <h3>{{ patient.name }} Prescription</h3>
      {% if patient.prescription.count %} {% for prescription in patient.prescriptions.all %}
      <div class="card">
        <div class="card-content">
          <span class="card-title">
           {{ prescription.name.capitalize }} {{ prescription.dosage }}
          </span>
        </div>
      </div>
      {% endfor %}
      {% else %}
      <h5>{{ patient.name }} has no prescriptions</h5>
      {% endif %}
    </div>
    <div class="col s6">
      <h3>Available Prescriptions</h3>
      {% if prescriptions.count %}
        {% for prescription in prescriptions.all %}
        <div class="card">
          <div class="card-content">
            <span class="card-title">
            {{ prescription.name.capitalize}} {{ prescription.dosage }} 
            </span>
          </div>
          <div class="card-action">
            <form action="{% url 'assoc_prescription' patient.id prescription.id %}" method="POST">
              {% csrf_token %}
              <input class="" type="submit" value="Add">
            </form>
          </div>
        </div>
        {% endfor %}
        {% else %}
        <h5>{{ patient.name }} has all available prescriptions</h5>
        {% endif %}
    </div>
  </div>
</div>  
  


{% endblock %}